<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-icons/maps-icons.html">
<link rel="import" href="/bower_components/polymer/lib/elements/dom-repeat.html">
<link rel="import" href="/bower_components/polymer/lib/elements/dom-if.html">

<dom-module id="my-summary">
  <template>
    <style>
      .container{
        border: 1px solid #ccc!important;
        border-radius: 16px;
        padding: 0.01em 16px;
        margin: 25px;
      }

      .title_info{
        color: #ff8300;
        margin-top: 0;
      }

      .hidden{
        display: none;
      }
      dd{
        font-weight: bold;
      }
      a img{
        width: 40px;
        height: 40px;
      }
      img{
        width: 100px;
        height: 100px;
      }
      .container__personal{
        display: grid;
        grid-template-columns: 1fr 1fr;
      }
    </style>
    <h1>Resumen</h1>

    <div class="container">
      <h2 class="title_info">Información Personal</h2>
      <div class="container__personal">
        <dl>
          <dt>Imagen</dt>
          <dd><img src="[[data.user.personalInfo.userImage]]" alt="Usuario"></dd>
          <dt>Nombre</dt>
          <dd>[[data.user.personalInfo.userName]]</dd>
          <dt>Apellido Paterno</dt>
          <dd>[[data.user.personalInfo.userSurname]]</dd>
          <dt>Apellido Materno</dt>
          <dd>[[data.user.personalInfo.userLastname]]</dd>
          <dt>Sexo</dt>
          <dd>[[_getSex(data.user.personalInfo.userSex)]]</dd>
          <dt>Curp</dt>
          <dd>[[data.user.personalInfo.userCurp]]</dd>
          <dt>RFC</dt>
          <dd>[[data.user.personalInfo.userRFC]]</dd>
          <dt>Numero Seguro Social</dt>
          <dd>[[data.user.personalInfo.userEnsurance]]</dd>
          <dt>Estado Civil</dt>
          <dd>[[_getMaritalStatus(data.user.personalInfo.maritalStatus)]]</dd>
          <dt>Fecha Nacimiento</dt>
          <dd>[[data.user.personalInfo.userBirthday]]</dd>
        </dl>
        <dl>
          <dt>Meta Profesional</dt>
          <dd>[[data.user.personalInfo.professionalGoal]]</dd>
          <dt>Calle</dt>
          <dd>[[data.user.personalInfo.userAddressStreet]]</dd>
          <dt>Numero</dt>
          <dd>[[data.user.personalInfo.userAddressOutsideNumber]]</dd>
          <dt>Numero Interior</dt>
          <dd>[[data.user.personalInfo.userAddressInsideNumber]]</dd>
          <dt>Colonia</dt>
          <dd>[[data.user.personalInfo.userAddressNeighborhood]]</dd>
          <dt>Código Postal</dt>
          <dd>[[data.user.personalInfo.userAddressPC]]</dd>
          <dt>Ciudad</dt>
          <dd>[[data.user.personalInfo.userAddressCity]]</dd>
          <dt>Telefonos</dt>
          <template is="dom-repeat" items="{{data.user.personalInfo.phones}}" as="item">
            <dd>[[item]]</dd>
          </template>
          <dt>Emails</dt>
          <template is="dom-repeat" items="{{data.user.personalInfo.emails}}" as="item">
            <dd>[[item]]</dd>
          </template>
          <dt>Linkedin</dt>
          <dd> <a href="[[data.user.personalInfo.userLinkedIn]]"><img src="../assets/img/linkedin.png" alt="Linkedin"></a></dd>
        </dl>
      </div>
    </div>

    <div class="container">
      <h2 class="title_info">Formación</h2>
      <dl>
        <template class="hidden" is="dom-repeat" items="{{data.user.formacion}}" as="item">
          <dt>Institución</dt>
          <dd>[[item.institucion]]</dd>
          <dt>Titulación</dt>
          <dd>[[item.titulacion]]</dd>
          <dt>Estatus</dt>
          <dd>[[item.level]]</dd>
          <dt>En curso</dt>
          <template class="hidden" is="dom-if" if="[[item.actual]]">
            <dd>Si</dd>
          </template>
          <template class="hidden" is="dom-if" if="[[!item.actual]]">
            <dd>No</dd>
          </template>
          <dt>Inicio</dt>
          <dd>[[item.desde]]</dd>
          <dt>Fin</dt>
          <dd>[[item.hasta]]</dd>
        </template>
      </dl>
    </div>

      <div class="container">
        <h2 class="title_info">Experiencia</h2>
        <dl>
          <template class="hidden" is="dom-repeat" items="{{data.user.experience}}" as="item">
            <dt>Compañia</dt>
            <dd>[[item.company]]</dd>
            <dt>Posición</dt>
            <dd>[[item.position]]</dd>
            <dt>Localización</dt>
            <dd>[[item.location]]</dd>
            <dt>Descripción</dt>
            <dd>[[item.description]]</dd>
            <dt>Fecha Inicial</dt>
            <dd>[[item.startDate]]</dd>
            <dt>Fecha Final</dt>
            <dd>[[item.finalDate]]</dd>
            <dt>Es tu trabajo actual</dt>
            <template class="hidden" is="dom-if" if="[[item.actual]]">
              <dd>Si</dd>
            </template>
            <template class="hidden" is="dom-if" if="[[!item.actual]]">
              <dd>No</dd>
            </template>
          </template>
        </dl>
      </div>

      <div class="container">
        <h2 class="title_info">Conocimientos</h2>
        <dl>
          <dt>Conocimiento - Porcentaje</dt>
          <template class="hidden" is="dom-repeat" items="{{data.user.knowledges}}" as="item">
            <dd>[[item.knowledge]] - [[item.percent]]</dd>
          </template>
        </dl>
      </div>

      <div class="container">
        <h2 class="title_info">Aptitudes</h2>
        <dl>
          <dt>Aptitud</dt>
          <template class="hidden" is="dom-repeat" items="{{data.user.skills}}" as="item">
            <dd>[[item]]</dd>
          </template>
        </dl>
      </div>

      <div class="container">
        <h2 class="title_info">Idiomas</h2>
        <dl>
          <dt>Idioma - Nivel</dt>
          <template class="hidden" is="dom-repeat" items="{{data.user.languages}}" as="item">
            <dd>[[item.name]] - [[item.level]]</dd>
          </template>
        </dl>
      </div>


    <div class="container">
      <h2 class="title_info">Certificaciones</h2>
      <dl>
        <template class="hidden" is="dom-repeat" items="{{data.user.certificaciones}}" as="item">
          <dt>Nombre de Certificación</dt>
          <dd>[[item.nombre]]</dd>
          <dt>Empresa</dt>
          <dd>[[item.entidad]]</dd>
          <dt>Licencia</dt>
          <dd>[[item.licencia]]</dd>
          <dt>Inicio</dt>
          <dd>[[item.fechaInicio]]</dd>
          <dt>Fin</dt>
          <dd>[[item.fechaFin]]</dd>
          <dt>Es permanente tu Licencia</dt>
          <template class="hidden" is="dom-if" if="[[item.permanente]]">
            <dd>Si</dd>
          </template>
          <template class="hidden" is="dom-if" if="[[!item.permanente]]">
            <dd>No</dd>
          </template>
        </template>
      </dl>
    </div>
    <paper-button raised on-click="_print">Imprimir</paper-button>
  </template>

  <script>
    /**
     * `my-summary`
     *
     *
     * @customElement
     * @polymer
     *
     */
    class MySummary extends Polymer.Element {
      static get is() { return 'my-summary'; }
      static get properties() {
        return {
          data: {
            type: Object,
            value: {
              "user":{
                "languages":[ { "name" : "ingles", "level": "Principiante" } ],

                "knowledges": [{
                  "knowledge": "JavaScript",
                  "percent": "50%",
                  "description": "Angular 2, Polymer 2, React"
                  }],

                "skills":["Teamwork", "Responsibility"],

                "experience": [{
                  "company": "Kairos",
                  "position": "Web Developer",
                  "location": "WeWork Varsovia",
                  "description": "Web Developer for CV",
                  "finalDate": "2017/06/09",
                  "startDate": "2018/07/10",
                  "actual": false
                }],

                "formacion": [
                    {
                      "id" : "1",
                      "institucion" : "Politecnico Nacional",
                      "titulacion"  : "Lic. en Informatica",
                      "estatus"     : "Titulado",
                      "encurso"     : "No",
                      "desde"       : "2017/06/09",
                      "hasta"       : "2018/07/10"
                    }
                ],

                "certificaciones": [
                    {
                      "id" : "",
                      "nombre" : "Certificación JS",
                      "entidad" : "Big Nerd Ranch",
                      "licencia" : "2929349848",
                      "fechaFin" : "2017/06/09",
                      "fechaInicio" : "2018/07/10",
                      "permanente" : false
                    }
                ],

                "personalInfo":{
                    "userImage" : "https://randomuser.me/api/portraits/med/men/65.jpg",
                    "userLinkedIn" : "https://www.linkedin.com/in/octavio-delgado-real-98948069/",
                    "userSex" : "M",
                    "userName" : "Ignacio",
                    "userSurname" : "Villarreal",
                    "userLastname" : "Alvarez",
                    "userCurp" : "VIAI9105300G0HDF",
                    "userRFC" : "VIAI910530",
                    "userEnsurance" : "92893848292",
                    "maritalStatus" : "1",
                    "userBirthday" : "1991-05-30",
                    "professionalGoal" : "Trabajar en Google",
                    "userAddressStreet" : "Joaquin Romo",
                    "userAddressOutsideNumber" : "14",
                    "userAddressInsideNumber" : "0",
                    "userAddressNeighborhood" : "Tlalpan",
                    "userAddressPC" : "14300",
                    "userAddressState" : "CDMX",
                    "userAddressCity" : "CDMX",
                    "phones" : ["2282183578", "5534332211"],
                    "emails" : ["ralpuchev@gmail.com", "rafael.alpuche@kairosds.com"]
                }

              }
            }
          }
        }
      };

      connectedCallback() {
        super.connectedCallback();
        console.log(this.user);
      }
      _getMaritalStatus(id){
        let maritalStatus = {
          1:"Soltero",
          2:"Casado",
          3:"Divorciado"
        }
        return maritalStatus[id];
      }
      _getSex(id){
        let userSex = {M:"Hombre",W:"Mujer"};
        return userSex[id];
      }
      _print(){
        window.print();
      }
    }

    window.customElements.define(MySummary.is, MySummary);
  </script>
</dom-module>
