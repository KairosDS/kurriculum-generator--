<!--por defecto-->
<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/polymer/lib/elements/dom-repeat.html">
<link rel="import" href="../bower_components/polymer/lib/elements/dom-if.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">

<dom-module id="list-element">
    <template>
        <style>
            .list-head-container {
                display: flex;
                align-items: center;
                justify-content: center;
                flex-direction: row;
            }
            
            .form-input {
                font-size: 18px;
                width: 81%;
                margin: 0 auto;
                border-radius: 3px;
                text-align: center;
            }
            
            .item-action {
                background-color: dimgrey;
                color: white;
                width: 25px;
                height: 25px;
                border-radius: 12px;
                text-align: center;
                margin: 12px;
                display: flex;
                justify-items: center;
                align-items: center;
                flex-direction: row;
            }
            
            .action-label {
                text-align: center;
                margin: 0 auto;
                cursor: pointer;
            }
            
            .item-container {
                display: flex;
                align-items: center;
                justify-content: center;
                flex-direction: row;
                width: 100%;
            }
        </style>
        <section class="container">
            <div class="list-head-container">
                <h1>[[title]]</h1>
                <div class="item-action" on-click="addNewItem"><label class="action-label">+</label></div>
            </div>
            <div class="list-body-container" id="listBodyContainer">
                <template is="dom-if" if="[[hasItems]]">
                    <template is="dom-repeat" items="[[items]]" as="item">
                        <div class="item-container" id$="item_container_[[index]]">
                            <paper-input type="text" name="item" required label="[[placeholder]]" value="{{item}}"></paper-input>
                            <div class="item-action" index="[[index]]" on-click="deleteItem"><label class="action-label">-</label></div>
                        </div>
                    </template>
                </template>
            </div>
        </section>
    </template>
    <script>
        (function listElement(customElements){
            'use strict';

            class ListElement extends Polymer.Element {
                static get is() { return 'list-element'; }
                
                static get properties() {
                    return {
                        title : {
                            type : String,
                            value : "Lista Genérica"
                        },
                        items : {
                            type : Array,
                            value : [],
                            notify: true
                        },
                        hasItems: {
                            type: Boolean,
                            value: false
                        },
                        placeholder : {
                            type : String,
                            value : "Escribe un valor"
                        }
                    }
                }
                
                connectedCallback() {
                    super.connectedCallback();  
                }

                static get observers() {
                    return [
                        'numberOfItems(items.*)'
                    ]
                }
                
                addNewItem() {
                    this.push('items', '');
                }
                
                numberOfItems() {
                    if (this.items !== undefined) {
                        this.hasItems = true ? this.items.length > 0 : false;
                        return false;
                    } else {
                        this.items = [];
                    }
                }
                
                deleteItem(event) {
                    if(!confirm("¿Deseas eliminar este elemento?")) return;
                    this.splice("items", event.composedPath()[0].index, 1);
                }
            }
        customElements.define(ListElement.is, ListElement);
        })(window.customElements);
  </script>
</dom-module>
